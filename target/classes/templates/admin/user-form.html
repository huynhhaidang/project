<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{fragments :: head('Người dùng')}"></head>
<body class="admin-body">
<div class="admin-shell">
    <aside class="admin-sidebar">
        <div class="admin-brand">
            <img th:src="@{/theme/images/main-logo.png}" alt="TechShop" class="logo">
            <div>
                <div>TechShop</div>
                <small>Admin Panel</small>
            </div>
        </div>
        <nav class="admin-nav">
            <a th:href="@{/admin}">Bảng điều khiển</a>
            <a th:href="@{/admin/products}">Sản phẩm</a>
            <a th:href="@{/admin/categories}">Danh mục</a>
            <a th:href="@{/admin/orders}">Đơn hàng</a>
            <a th:href="@{/admin/users}">Người dùng</a>
            <a th:href="@{/}">Về trang chủ</a>
        </nav>
    </aside>
    <div class="admin-content">
        <div class="admin-topbar">
            <div>
                <h1 th:text="${userId != null ? 'Sửa người dùng' : 'Thêm người dùng'}">Người dùng</h1>
                <div class="text-muted">Quản lý tài khoản và quyền hạn</div>
            </div>
            <a class="btn btn-outline-gray" th:href="@{/admin/users}">Quay lại</a>
        </div>

    <form th:action="${userId != null ? '/admin/users/' + userId : '/admin/users'}" method="post"
          th:object="${userForm}" class="auth-card">
        <label>Tên đăng nhập</label>
        <input type="text" th:field="*{username}" th:readonly="${userId != null}" class="form-control" required>
        <div class="error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></div>

        <label class="mt-3">Họ tên</label>
        <input type="text" th:field="*{fullName}" class="form-control" required>
        <div class="error" th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}"></div>

        <label class="mt-3">Số điện thoại</label>
        <input type="text" th:field="*{phone}" class="form-control" required>
        <div class="error" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>

        <label class="mt-3">Email</label>
        <input type="email" th:field="*{email}" class="form-control" required>
        <div class="error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>

        <label class="mt-3">Mật khẩu</label>
        <input type="password" th:field="*{password}" placeholder="Để trống nếu không đổi" class="form-control">
        <div class="error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>

        <label class="mt-3">Vai trò</label>
        <select th:field="*{role}" class="form-select">
            <option value="ROLE_USER">USER</option>
            <option value="ROLE_ADMIN">ADMIN</option>
        </select>

        <label class="mt-3">Trạng thái</label>
        <select th:field="*{enabled}" class="form-select">
            <option value="true">Hoạt động</option>
            <option value="false">Bị khóa</option>
        </select>

        <button type="submit" class="btn btn-red mt-3">Lưu</button>
    </form>
    </div>
</div>

<div th:replace="~{fragments :: footer-scripts}"></div>
</body>
</html>
